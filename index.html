<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>AI Health Companion</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="theme-color" content="#10B981" />
    <meta name="color-scheme" content="light" />
    <link rel="stylesheet" href="style.css" />
    <!-- Supabase JS client (for database connection) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  </head>
  <body>
    <div class="app">
      <header class="topbar">
        <div class="brand">
          <div class="logo" aria-hidden="true">+</div>
          <div class="brandText">
            <div class="brandName">AI Health Companion</div>
            <div class="brandSub" id="brandSub">Care in your language</div>
          </div>
        </div>
        <button class="iconBtn" id="settingsBtn" aria-label="Settings" onclick="goSettings()">
          <span aria-hidden="true">‚öôÔ∏è</span>
        </button>
      </header>

      <main class="viewport">
        <!-- LANGUAGE PICKER -->
        <section class="screen active" id="screen-language" data-screen="language" aria-label="Language picker">
          <div class="hero">
            <div class="kicker" data-i18n="kicker_welcome">Welcome</div>
            <h1 class="title" data-i18n="language_title">Choose your language</h1>
            <p class="subtitle" data-i18n="language_subtitle">
              We‚Äôll tailor the experience to your preference.
            </p>
          </div>

          <div class="cardList" id="languageList">
            <!-- Fallback static options; JS will enhance/replace these -->
            <button class="cardItem" onclick="selectLanguage('en')">
              <div class="left">
                <div class="itemTitle">English</div>
              </div>
            </button>
            <button class="cardItem" onclick="selectLanguage('hi')">
              <div class="left">
                <div class="itemTitle">Hindi</div>
              </div>
            </button>
            <button class="cardItem" onclick="selectLanguage('bn')">
              <div class="left">
                <div class="itemTitle">Bengali</div>
              </div>
            </button>
            <button class="cardItem" onclick="selectLanguage('kn')">
              <div class="left">
                <div class="itemTitle">Kannada</div>
              </div>
            </button>
            <button class="cardItem" onclick="selectLanguage('te')">
              <div class="left">
                <div class="itemTitle">Telugu</div>
              </div>
            </button>
            <button class="cardItem" onclick="selectLanguage('ml')">
              <div class="left">
                <div class="itemTitle">Malayalam</div>
              </div>
            </button>
            <button class="cardItem" onclick="selectLanguage('ta')">
              <div class="left">
                <div class="itemTitle">Tamil</div>
              </div>
            </button>
            <button class="cardItem" onclick="selectLanguage('mr')">
              <div class="left">
                <div class="itemTitle">Marathi</div>
              </div>
            </button>
          </div>

          <div class="ctaRow">
            <button class="btn primary tall" id="languageContinue" data-i18n="continue">
              Continue
            </button>
          </div>
        </section>

        <!-- ROLE SELECT -->
        <section class="screen" id="screen-role" data-screen="role" aria-label="Role selection">
          <div class="hero">
            <div class="kicker" data-i18n="kicker_step2">Step 2</div>
            <h1 class="title" data-i18n="role_title">Select your role</h1>
            <p class="subtitle" data-i18n="role_subtitle">
              We‚Äôll personalize the journey for you.
            </p>
          </div>

          <div class="cardList" id="roleList"></div>
        </section>

        <!-- LOGIN -->
        <section class="screen" id="screen-login" data-screen="login" aria-label="Login">
          <div class="hero compact">
            <div class="kicker" data-i18n="login_kicker">Sign in</div>
            <h1 class="title" data-i18n="login_title">Welcome back</h1>
            <p class="subtitle" data-i18n="login_subtitle">
              This is a demo login screen ‚Äì no real account needed.
            </p>
          </div>

          <div class="card">
            <div class="row" style="flex-direction:column; align-items:stretch; gap:10px;">
              <div>
                <div class="rowTitle" data-i18n="login_username_label">Username</div>
                <input class="input" id="loginUsername" type="text" placeholder="Enter your username" autocomplete="username" />
              </div>
              <div>
                <div class="rowTitle" data-i18n="login_password_label">Password</div>
                <input class="input" id="loginPassword" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" />
              </div>
            </div>
          </div>

          <button class="btn primary tall" id="loginSubmit" data-i18n="login_submit">
            Continue
          </button>
          <button class="btn ghost tall" id="loginBack" data-i18n="login_back">
            Back to role select
          </button>
          <button class="btn ghost tall" id="loginToSignup" data-i18n="login_to_signup">
            Need an account? Sign up
          </button>
        </section>

        <!-- SIGNUP -->
        <section class="screen" id="screen-signup" data-screen="signup" aria-label="Sign up">
          <div class="hero compact">
            <div class="kicker" data-i18n="signup_kicker">Create account</div>
            <h1 class="title" data-i18n="signup_title">Join AI Health Companion</h1>
            <p class="subtitle" data-i18n="signup_subtitle">
              This is a demo signup screen for flows only.
            </p>
          </div>

          <div class="card">
            <div class="row" style="flex-direction:column; align-items:stretch; gap:10px;">
              <div>
                <div class="rowTitle" data-i18n="signup_username_label">Username</div>
                <input class="input" id="signupUsername" type="text" placeholder="Choose a username" autocomplete="username" />
              </div>
              <div>
                <div class="rowTitle" data-i18n="signup_name_label">Full name</div>
                <input class="input" id="signupFullName" type="text" placeholder="Your full name" autocomplete="name" />
              </div>
              <div>
                <div class="rowTitle" data-i18n="signup_email_label">Email</div>
                <input class="input" id="signupEmail" type="email" placeholder="you@example.com" autocomplete="email" />
              </div>
              <div>
                <div class="rowTitle" data-i18n="signup_password_label">Password</div>
                <input class="input" id="signupPassword" type="password" placeholder="Create password (min 6 characters)" autocomplete="new-password" />
              </div>
            </div>
          </div>

          <button class="btn primary tall" id="signupSubmit" data-i18n="signup_submit">
            Create account
          </button>
          <button class="btn ghost tall" id="signupBack" data-i18n="signup_back">
            Back to login
          </button>
        </section>

        <!-- PATIENT DASHBOARD -->
        <section class="screen" id="screen-patient" data-screen="patient" aria-label="Patient dashboard">
          <div class="hero compact">
            <div class="kicker" data-i18n="kicker_patient">Patient</div>
            <h1 class="title" data-i18n="patient_dashboard_title">Dashboard</h1>
          </div>

          <div class="card patientCard" id="patientCard"></div>

          <div class="card center">
            <div class="cardTitle" data-i18n="ai_card_title">AI Health Companion</div>
            <div class="cardSub" data-i18n="ai_card_subtitle">Ask questions in your language.</div>
            <button class="micBtn" id="micBtn" aria-label="Mic">
              <span class="micPulse" aria-hidden="true"></span>
              <span class="micIcon" aria-hidden="true">üé§</span>
            </button>
            <button class="btn ghost tall" id="typeInstead" data-i18n="type_instead">
              Type instead
            </button>
          </div>

          <div class="sectionHead">
            <div class="sectionTitle" data-i18n="upcoming_title">Upcoming care</div>
            <div class="sectionSub" data-i18n="upcoming_sub">
              Stay on top of visits and bookings
            </div>
          </div>
          <div class="cardList" id="upcomingList"></div>

          <div class="sectionHead">
            <div class="sectionTitle" data-i18n="completed_title">Completed care</div>
            <div class="sectionSub" data-i18n="completed_sub">
              Your past consultations
            </div>
          </div>
          <div class="cardList" id="completedList"></div>

          <div class="sectionHead">
            <div class="sectionTitle" data-i18n="recommended_title">Recommended doctors</div>
            <div class="sectionSub" data-i18n="recommended_sub">
              Nearby specialists for you
            </div>
          </div>
          <div class="cardList" id="doctorRecoList"></div>

          <button class="btn primary tall" id="findDoctors" data-i18n="find_doctors">
            Find doctors
          </button>

          <div class="quickGrid">
            <button class="quickCard" id="quickDoctors">
              <div class="quickIcon" aria-hidden="true">üßë‚Äç‚öïÔ∏è</div>
              <div class="quickText" data-i18n="quick_find_doctor">Find doctor</div>
            </button>
            <button class="quickCard" id="quickChat">
              <div class="quickIcon" aria-hidden="true">ü§ñ</div>
              <div class="quickText" data-i18n="quick_ai_chat">AI Chat</div>
            </button>
            <button class="quickCard" id="quickRole">
              <div class="quickIcon" aria-hidden="true">‚Ü©Ô∏è</div>
              <div class="quickText" data-i18n="quick_change_role">Change role</div>
            </button>
          </div>
        </section>

        <!-- AI CHAT -->
        <section class="screen" id="screen-chat" data-screen="chat" aria-label="AI chat">
          <div class="hero compact">
            <div class="kicker" data-i18n="kicker_ai">AI Companion</div>
            <h1 class="title" data-i18n="chat_title">AI Chat</h1>
          </div>

          <div class="chatWrap">
            <div class="chatList" id="chatList" aria-live="polite"></div>
          </div>

          <div class="composer">
            <input
              class="input"
              id="chatInput"
              type="text"
              autocomplete="off"
              placeholder="Type a message..."
            />
            <button class="btnSend" id="chatSend" aria-label="Send">
              <span aria-hidden="true">‚û§</span>
            </button>
          </div>

          <button class="btn primary tall" id="chatFindDoctors" data-i18n="find_doctors_nearby">
            Find doctors nearby
          </button>
        </section>

        <!-- DOCTOR SEARCH / BOOKING -->
        <section class="screen" id="screen-doctors" data-screen="doctors" aria-label="Doctor search">
          <div class="hero compact">
            <div class="kicker" data-i18n="kicker_booking">Booking</div>
            <h1 class="title" data-i18n="doctors_title">Doctors near you</h1>
            <p class="subtitle" data-i18n="doctors_subtitle">
              Suggested specialists available today.
            </p>
          </div>

          <div class="cardList" id="doctorList"></div>

          <div class="card bookingCard" id="bookingCard" hidden></div>
        </section>

        <!-- VIDEO CALL PLACEHOLDER -->
        <section class="screen" id="screen-video" data-screen="video" aria-label="Video call">
          <div class="hero compact">
            <div class="kicker" data-i18n="kicker_call">Live consult</div>
            <h1 class="title" data-i18n="video_title">Video call in progress</h1>
            <p class="subtitle" data-i18n="video_subtitle">
              This is a placeholder screen to represent a teleconsultation.
            </p>
          </div>

          <div class="card center">
            <div class="cardTitle">Doctor on call</div>
            <div class="cardSub">You can imagine a real video stream here.</div>
            <div style="margin-top:18px;font-size:40px;">üé•</div>
          </div>

          <button class="btn primary tall" id="videoEnd" data-i18n="video_end_call">
            End call
          </button>
        </section>

        <!-- DOCTOR DASHBOARD -->
        <section class="screen" id="screen-doctor" data-screen="doctor" aria-label="Doctor dashboard">
          <div class="hero compact">
            <div class="kicker" data-i18n="kicker_doctor">Doctor</div>
            <h1 class="title" data-i18n="doctor_dashboard_title">Doctor dashboard</h1>
          </div>

          <div class="card doctorProfile" id="doctorProfile"></div>

          <div class="statRow">
            <div class="statCard">
              <div class="statLabel" data-i18n="stat_today">Today</div>
              <div class="statValue" id="statTodayValue">6</div>
              <div class="statSub" data-i18n="stat_consults">Consultations</div>
            </div>
            <div class="statCard">
              <div class="statLabel" data-i18n="stat_pending">Pending</div>
              <div class="statValue" id="statPendingValue">3</div>
              <div class="statSub" data-i18n="stat_followups">Follow-ups</div>
            </div>
            <div class="statCard">
              <div class="statLabel" data-i18n="stat_rating">Rating</div>
              <div class="statValue" id="statRatingValue">4.9</div>
              <div class="statSub" data-i18n="stat_score">Patient score</div>
            </div>
          </div>

          <div class="sectionHead">
            <div class="sectionTitle" data-i18n="patients_title">Patient list</div>
            <div class="sectionSub" data-i18n="patients_sub">Today‚Äôs scheduled patients</div>
          </div>
          <div class="cardList" id="patientList"></div>

          <div class="sectionHead">
            <div class="sectionTitle" data-i18n="doctor_upcoming_title">Upcoming appointments</div>
            <div class="sectionSub" data-i18n="doctor_upcoming_sub">Next 7 days schedule</div>
          </div>
          <div class="cardList" id="doctorUpcomingList"></div>

          <div class="sectionHead">
            <div class="sectionTitle" data-i18n="doctor_completed_title">Recent completed</div>
            <div class="sectionSub" data-i18n="doctor_completed_sub">Last consultations</div>
          </div>
          <div class="cardList" id="doctorCompletedList"></div>
        </section>

        <!-- SETTINGS -->
        <section class="screen" id="screen-settings" data-screen="settings" aria-label="Settings">
          <div class="hero compact">
            <div class="kicker" data-i18n="kicker_settings">Preferences</div>
            <h1 class="title" data-i18n="settings_title">Settings</h1>
            <p class="subtitle" data-i18n="settings_subtitle">
              Language updates live across the experience.
            </p>
          </div>

          <div class="card">
            <div class="row">
              <div>
                <div class="rowTitle" data-i18n="settings_language">Language</div>
                <div class="rowSub" id="currentLanguage"></div>
              </div>
              <div class="seg">
                <button class="segBtn" id="segEN">EN</button>
                <button class="segBtn" id="segHI">HI</button>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="row">
              <div>
                <div class="rowTitle" data-i18n="settings_pwa">PWA install</div>
                <div class="rowSub" data-i18n="settings_pwa_note">
                  Install works when served over http(s). Double-click file:// cannot install PWAs.
                </div>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="row">
              <div>
                <div class="rowTitle">Database</div>
                <div class="rowSub">Test Supabase connection.</div>
              </div>
              <div>
                <button class="btn small" id="testSupabaseBtn">Test connection</button>
              </div>
            </div>
          </div>

          <button class="btn ghost tall" id="backBtn" data-i18n="back">Back</button>
        </section>
      </main>

      <nav class="bottombar" aria-label="Bottom navigation">
        <button class="tab active" data-go="language" id="tabHome">
          <span class="tabIcon" aria-hidden="true">üè†</span>
          <span class="tabText" data-i18n="tab_home">Home</span>
        </button>
        <button class="tab" data-go="chat" id="tabChat">
          <span class="tabIcon" aria-hidden="true">üí¨</span>
          <span class="tabText" data-i18n="tab_chat">Chat</span>
        </button>
        <button class="tab" data-go="doctors" id="tabDoctors">
          <span class="tabIcon" aria-hidden="true">üßë‚Äç‚öïÔ∏è</span>
          <span class="tabText" data-i18n="tab_doctors">Doctors</span>
        </button>
        <button class="tab" data-go="role" id="tabRole">
          <span class="tabIcon" aria-hidden="true">üë§</span>
          <span class="tabText" data-i18n="tab_role">Role</span>
        </button>
      </nav>
    </div>

    <div class="toast" id="toast" role="status" aria-live="polite"></div>

    <script src="script.js"></script>
  </body>
</html>
